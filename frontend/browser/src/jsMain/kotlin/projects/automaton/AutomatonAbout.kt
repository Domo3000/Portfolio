package projects.automaton

import web.cssom.Clear
import web.cssom.ObjectFit
import web.cssom.pct
import web.cssom.px
import emotion.react.css
import react.FC
import react.Props
import web.window.WindowTarget
import react.dom.html.ReactHTML
import react.dom.html.ReactHTML.a
import react.dom.html.ReactHTML.div
import react.dom.html.ReactHTML.p
import react.dom.html.ReactHTML.strong

//TODO move to utils
external interface ImageProps : Props {
    var imageSource: String
    var altText: String
    var copyrightSource: String
    var copyrightMessage: String
}

private val image: FC<ImageProps>
    get() = FC { props ->
        div {
            div {
                ReactHTML.img {
                    css {
                        width = 100.pct
                        height = 100.pct
                        maxWidth = 300.px
                        objectFit = ObjectFit.contain
                    }
                    src = props.imageSource
                    alt = props.altText
                }
            }
            div {
                ReactHTML.a {
                    href = props.copyrightSource
                    target = WindowTarget._blank
                    +props.copyrightMessage
                }
            }
        }
    }

val About = FC<Props> {
    div {
        strong {
            +"Nature meets Math"
        }
        div {
            image {
                imageSource = "/static/shell.jpg"
                altText = "A Conus textile shell similar in appearance to Rule 30"
                copyrightSource = "https://creativecommons.org/licenses/by-sa/3.0/"
                copyrightMessage = "Copyright (c) 2005 Richard Ling"
            }
        }
        p {
            css {
                clear = Clear.left
            }
            +"This project shows "
            a {
                href = "https://en.wikipedia.org/wiki/Elementary_cellular_automaton"
                target = WindowTarget._blank
                +"Elementary Cellular Automaton"
            }
            +" in which each new line is generated by applying the ruleset to the current line."
        }
        p {
            +"It defaults to "
            a {
                href = "https://en.wikipedia.org/wiki/Rule_30"
                target = WindowTarget._blank
                +"Rule 30"
            }
            +", which displays chaotic behavior despite only following simple mathematical rules."
        }
    }
}